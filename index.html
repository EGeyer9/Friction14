<!DOCTYPE html>
<html>
<head>
  <title>Friction Simulation</title>
  <style>
    canvas {
      border: 1px solid #ccc;
      display: block;
      margin: 20px auto;
      background: #f9f9f9;
    }
    .controls {
      text-align: center;
      margin-bottom: 10px;
    }
    button {
      margin: 0 5px;
      padding: 5px 10px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
    }
    .toggle-btn {
      background-color: #007bff;
      color: white;
    }
    .toggle-btn:disabled {
      background-color: #999;
      cursor: not-allowed;
    }
    .reset-btn {
      background-color: #007bff;
      color: white;
    }
  </style>
</head>
<body>
  <div class="controls">
    Friction max (N): <input type="number" id="frictionInput" value="50" style="width:60px;">
    <button id="frictionBtn" class="toggle-btn">Friction: OFF</button>
    <button id="resumeBtn">Resume</button>
    <button id="resetBtn" class="reset-btn">Reset</button>
    <button id="pauseBtn">Pause</button>
  </div>
  <canvas id="canvas" width="800" height="500"></canvas>
  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    const rampAngle = 30 * Math.PI / 180;
    const rampLength = 400;
    const blockSize = 30;
    const mass = 10;
    const g = 9.8;

    let frictionMax = parseFloat(document.getElementById("frictionInput").value);
    let useFriction = false;
    let paused = true;

    let s = 0, v = 0, a = 0;
    let blockMoving = false;

    const rampBaseX = 500;
    const rampBaseY = 400;

    document.getElementById("frictionInput").addEventListener("change", () => {
      frictionMax = parseFloat(document.getElementById("frictionInput").value);
    });

    document.getElementById("frictionBtn").addEventListener("click", () => {
      useFriction = !useFriction;
      document.getElementById("frictionBtn").textContent = "Friction: " + (useFriction ? "ON" : "OFF");
    });

    document.getElementById("resumeBtn").addEventListener("click", () => {
      paused = false;
    });

    document.getElementById("pauseBtn").addEventListener("click", () => {
      paused = true;
    });

    document.getElementById("resetBtn").addEventListener("click", () => {
      s = 0; v = 0; a = 0;
      paused = true;
      blockMoving = false;
      document.getElementById("frictionBtn").disabled = false;
    });

    function drawGround() {
      ctx.beginPath();
      ctx.moveTo(0, rampBaseY);
      ctx.lineTo(canvas.width, rampBaseY);
      ctx.strokeStyle = "gray";
      ctx.lineWidth = 2;
      ctx.stroke();
    }

    function drawRamp() {
      const x1 = rampBaseX;
      const y1 = rampBaseY;
      const x2 = rampBaseX - rampLength * Math.cos(rampAngle);
      const y2 = rampBaseY - rampLength * Math.sin(rampAngle);

      ctx.beginPath();
      ctx.moveTo(x1, y1);
      ctx.lineTo(x2, y2);
      ctx.strokeStyle = "orange";
      ctx.lineWidth = 4;
      ctx.stroke();

      ctx.beginPath();
      ctx.moveTo(rampBaseX + 60, rampBaseY);
      ctx.arc(rampBaseX, rampBaseY, 60, Math.PI * 1.5, Math.PI * 1.5 + rampAngle, false);
      ctx.strokeStyle = "black";
      ctx.stroke();
      ctx.fillText("30°", rampBaseX + 30, rampBaseY - 10);

      return {x1, y1, x2, y2};
    }

    function drawBlock(ramp, s) {
      const dx = Math.cos(rampAngle);
      const dy = Math.sin(rampAngle);
      const bx = ramp.x2 + s * dx;
      const by = ramp.y2 + s * dy;

      ctx.save();
      ctx.translate(bx, by);
      ctx.rotate(-rampAngle);
      ctx.fillStyle = "blue";
      ctx.fillRect(-blockSize/2, -blockSize/2, blockSize, blockSize);
      ctx.restore();
    }

    function updatePhysics() {
      const Fg = mass * g * Math.sin(rampAngle);
      const Ff = useFriction ? Math.min(frictionMax, mass * g * Math.cos(rampAngle)) : 0;
      const Fnet = Fg - Ff;

      if (Math.abs(Fnet) < 0.0001 && v === 0) {
        a = 0;
        blockMoving = false;
      } else {
        a = Fnet / mass;
        blockMoving = true;
      }

      if (!paused) {
        v += a * 0.05;
        s += v * 0.05;
        if (s < 0) { s = 0; v = 0; a = 0; blockMoving = false; }
      }

      // disable friction button only if block is moving
      document.getElementById("frictionBtn").disabled = blockMoving;
    }

    function loop() {
      ctx.clearRect(0,0,canvas.width,canvas.height);

      drawGround();
      const ramp = drawRamp();
      drawBlock(ramp, s);

      ctx.fillStyle = "black";
      ctx.fillText(`Mass = ${mass} kg`, 600, 50);
      ctx.fillText(`Angle = 30°`, 600, 70);
      ctx.fillText(`s = ${s.toFixed(3)} m | v = ${v.toFixed(3)} m/s | a = ${a.toFixed(3)} m/s² | State: ${paused ? "paused" : "running"}`, 150, 480);

      updatePhysics();
      requestAnimationFrame(loop);
    }

    loop();
  </script>
</body>
</html>






